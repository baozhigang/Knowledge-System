# 《MySQL实战45讲》— 极客时间丁奇 专栏总结

### 01 基础架构：一条SQL查询语句是如何执行的？
    1）大体来说，MySQL分为Server层和存储引擎层
    2）Server层包括连接器、查询缓存、分析器、优化器、执行器等。涵盖MySQL大多数核心服务功能
    3）存储引擎层负责数据的存储和提取。从5.5.5版本开始InnoDB变成默认存储引擎。

### 02 日志系统：一条SQL更新语句是如何执行的？
    1）redo log重做日志，InnoDB所特有的，容量是固定大小的，使用时会循环覆盖，具有crash-safe能力
    2）redo log是InnoDB引擎层所特有的日志(物理日志)，而Server层也有自己的日志:binlog 归档日志(逻辑日志)
    3）redo log是物理日志，记录的是在这个数据页上做了什么。binlog是逻辑日志，记录的是这个语句的原始逻辑。
    4）redo log是循环写的，固定空间会用完。binlog是追加的，不会覆盖之前的日志。
    5）两阶段事务提交，是为了使两个日志的状态保持一致

### 03 事务隔离：为什么你改了我还是看不见？
    1）事务是在引擎层实现的，MyISAM引擎不支持，InnoDB引擎层支持
    2）SQL的隔离级别：
        读未提交：别人改数据的事务尚未提交，我在我的事务中也能读到。
        读提交：别人改数据的事务尚已提交，我在我的事务中才能读到。
        可重复读：别人改数据的事务已经提交，我在我的事务中也不去读。
        串行化：我的事务尚未提交，别人就别想改数据。
        这4中隔离级别，并行性能依次降低，安全性依次提高。
    3）为什么尽量不用长事务？
        在事务提交前，数据库会保存所有的提交记录，占用大量的内存
        长事务还占用大量的锁资源