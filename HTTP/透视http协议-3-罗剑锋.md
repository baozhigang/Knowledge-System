# 实体数据
1.数据类型表示实体数据的类型是什么，使用的是MIME type，相关的头字段是Accept和Content-Type
2.数据编码表示实体数据的压缩方式，相关的头字段是Accept-Encoding和Content-Encoding
3.语言类型表示实体数据的自然语言，相关的头字段是Accept-Language和Content-Language
4.字符集表示实体数据的编码方式，相关的头字段是Accept-Charset和Content-Charset
5.客户端需要在请求头里使用Accept等头字段与服务器进行内容协商，要求服务器返回合适的数据
6.Accept 等头字段可以用“,”顺序列出多个可能的选项，还可以用“;q=”参数来精确指定权重 

# 传输大文件
1.压缩HTML等文本文件是传输大文件最基本的方法
2.分块传输可以流式收发数据，节约内存和宽带，使用响应头字段，使用响应头字段“Transfer-Encoding: chunked”来表示，分块的格式是 16 进制长度头 + 数据块；
3.范围请求可以只获取部分数据，即分块请求，实现视频拖拽或者断点续传，使用请求头字段"Range"和相应头字段”Content-Range“，响应状态码必须是206
4.也可以一次请求多个范围，这时候响应报文的数据类型是“multipart/byteranges”，body里面多个部分会用boundary字符串分隔 

# HTTP连接管理
1.早期的 HTTP 协议使用短连接，收到响应后就立即关闭连接，效率很低；
2.HTTP/1.1 默认启用长连接，在一个连接上收发多个请求响应，提高了传输效率；
3.服务器会发送“Connection: keep-alive”字段表示启用了长连接；
4.报文头里如果有“Connection: close”就意味着长连接即将关闭；
5.过多的长连接会占用服务器资源，所以服务器会用一些策略有选择地关闭长连接；
6.“队头阻塞”问题会导致性能下降，可以用“并发连接”和“域名分片”技术缓解。  
7.利用HTTP的长连接特性对服务器发起大量请求，导致服务器最终耗尽资源“拒绝服务”，这就是常说的DDoS。

# HTTP重定向和跳转
1.重定向是服务器发起的跳转，要求客户端使用新的URI重新发送请求，通常会自动进行，用户是无感知的
2.301/302是最常用的重定向状态码，分别是“永久重定向”和临时重定向
3.相应头字段Location指示了要跳转的URI，可以用绝对或者相对的形式
4.重定向可以把一个URI指向另一个URI，也可以把多个URI指向同一个URI，用途很多
5.使用重定向时要当心性能损耗，还要避免出现循环跳转

# HTTP缓存控制
1.缓存是优化系统性能的重要手段，HTTP传输的每一个环节中都可以有缓存
2.服务器使用“Cache-Control”设置缓存策略，常用的是“max-age”,表示资源的有效期
3.浏览器收到数据就会存入缓存，如果没有过期就直接使用，过期就去服务器验证是否仍然可用
4.验证资源是否失效需要使用“条件请求”，常用的是"if-Modifined-Since"和“If-None-Match”,收到304就可以复用缓存里的资源
5.验证资源是否被修改的条件有两个：“Last-modified”和“ETag”,需要服务器预先在响应报文里设置，搭配条件请求使用
6.浏览器也发送"Cache-Control"字段，使用“max-age=0”或“no-cache”刷新数据 

# HTTP缓存代理
1.计算机领域里最常用的优化手段是“时空转换”，也就是“时间换空间”或者“空间换时间”，HTTP缓存属于后者
2.缓存代理是增加了缓存功能的代理服务，缓存源服务器的数据，分发给下游的客户端
3.“Cache-Control”字段也可以控制缓存代理，常用的有“private”,"s-maxage","no-transform"等，同样必须配合“Last-modified”,"ETag"字段才能使用
4.缓存代理有时候也会带来负面影响，缓存不良数据，需要及时更新或者删除 